---
title: "Open Research Survey <img src=\"logos/UKRN_logo.jpg\" alt=\"UKRN logo\" style = \"float: right; padding: 20px;\"/><img src=\"logos/MRC_logo.png\" alt=\"MRC logo\" style = \"float: right; padding: 20px;\"/><img src=\"logos/UoB_logo.png\" alt=\"University of Bristol logo\" style = \"float: right; padding: 20px;\"/>"
author: "Emma Wilson"
date: "`r Sys.Date()`"
output: 
    html_document:
      theme: cosmo
---

```{r select, include=FALSE}
# Choose the data to run the report on
choose <- c("all", "mrc", "uob", "babraham")[1]
```

---

```{r setup, include=FALSE}
# R packages
library(forcats)      # For factor reverse
library(grid)         # Plot arrangement
library(gridExtra)    # Plot arrangement
library(tidyverse)    # Tidyverse packages
# Icons
#remotes::install_github("mitchelloharawild/icons")
library(icons)
#download_fontawesome()
#download_academicons()
# Functions
source("functions/format_distribution.R")       # Create a histogram of responses
source("functions/format_leadership.R")         # Format MajorleadershipRole for graph
source("functions/format_priority.R")           # Format OR area priority responses
source("functions/format_priority_training.R")  # Format OR area priority responses (subset)
source("functions/format_training.R")           # Format training responses for graph
source("functions/read_survey.R")               # Read in and format survey data
# KnitR
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)
```

```{r data, include=FALSE}
# Clean column text
col_order <- read_csv("data-helpers/colOrder.csv")
# MRC taxonomy
mrc_group <- read_csv("data-helpers/mrcTaxonomy.csv")

# Read in survey data
dat_mrc <- read_survey("data", "MRC") # MRC-funded institutions
dat_uob <- read_survey("data", "UoB") # University of Bristol
dat_bab <- read_survey("data", "Babraham") # Babraham Institute
# Bind into one dataframe
dat <- rbind(dat_mrc, dat_uob, dat_bab)

# Clear environment
rm(col_order, dat_bab, dat_mrc, dat_uob, mrc_group)

# Select relevant data
if(choose == "all"){
  dat <- dat
} else if(choose == "mrc"){
  dat <- filter(dat, Unit == "MRC")
} else if(choose == "uob"){
  dat <- filter(dat, Unit == "UoB")
} else if(choose == "babraham"){
  dat <- filter(dat, Unit == "Babraham")
}

# Discipline column factors
dat$Discipline <- as.factor(dat$Discipline)

# Format MajorLeadership Role Column
dat <- format_leadership(dat)

# Subset and format responses from those who want training
dat_training <- format_training(dat, training = "Yes")

# Subset and format responses from those who do not indicate they want training
dat_no_training <- format_training(dat, training = "No")

# Bind datasets together
dat_all_training <- rbind(dat_training, dat_no_training) %>%
  select(OR_Area, Response, Training)

# Factor levels
dat_all_training$Response <- factor(dat_all_training$Response,
                                    levels = c("Training provided",
                                               "Unknown familiarity",
                                               "Not familiar",
                                               "Familiar",
                                               "Already engage"))

# Create dataframe of topics ranked by priority
priority <- format_priority(dat)

# Subset only responses from those who would find training useful
priority_training <- format_priority_training(priority, dat_training)
```

# 1. Aim
This survey aimed to investigate the engagement of health and life sciences researchers with open research practices and training. The results of this survey will be used to inform priorities for researcher training in five different open research areas:

  * Open access publishing
  * Sharing of code and materials
  * Data sharing
  * Publishing preprints
  * Preregistration and registered reports

# Survey data

```{r, echo=FALSE, results="asis", warning=FALSE, message=FALSE}
# MRC Primary set levels
if (choose == "mrc"){
  dat$Primary <- factor(dat$Primary,
                        levels = c("Molecular and Cellular",
                                   "Physiological Systems",
                                   "Population and Public Health",
                                   "Not Reported"))
}

p1 <- dat %>% group_by(Discipline) %>% count(Unit) %>%
  ggplot(aes(x = Unit, y = n, label = n)) +
  geom_bar(aes(fill = Discipline), stat = "identity") +
  scale_fill_manual(values = c("#28295B", "#4E4F86", "#6e6e6e")) +
  ylim(0, nrow(dat)) +
  theme(legend.position="right", legend.text = element_text(size = 7)) +
  xlab("Organisation\n(a)") + ylab("Number of Responses") +
  geom_text(aes(group = Discipline), size = 3, position = position_stack(vjust = 0.5), color = "white") +
  theme(plot.title = element_text(hjust = 0.5))

p1_2 <- dat %>% group_by(Discipline) %>% count(Primary) %>%
  ggplot(aes(x = Primary, y = n, label = n)) +
  geom_bar(aes(fill = Discipline), stat = "identity") +
  scale_fill_manual(values = c("#28295B", "#4E4F86", "#6e6e6e")) +
  ylim(0, nrow(dat)) +
  theme(legend.position="right", legend.text = element_text(size = 7)) +
  xlab("Research Domain Taxonomy\n(a)") + ylab("Number of Responses") +
  scale_x_discrete(labels = function(x) str_wrap(x, width = 10)) +
  geom_text(aes(group = Discipline), size = 3, position = position_stack(vjust = 0.5), color = "white") +
  theme(plot.title = element_text(hjust = 0.5))

p1_3 <- count(dat, Discipline) %>%
  ggplot(aes(x = Discipline, y = n, label = n)) +
  geom_bar(aes(fill = Discipline), stat = "identity") +
  scale_fill_manual(values = c("#28295B", "#4E4F86", "#6e6e6e")) +
  ylim(0, nrow(dat)) +
  theme(legend.position="none", legend.text = element_text(size = 7)) +
  xlab("Research Discipline\n(a)") + ylab("Number of Responses") +
  scale_x_discrete(labels = function(x) str_wrap(x, width = 10)) +
  geom_text(aes(group = Discipline), size = 3, position = position_stack(vjust = 0.5), color = "white") +
  theme(plot.title = element_text(hjust = 0.5))

p2 <- count(dat, Leadership) %>%
  ggplot(aes(x = Leadership, y = n, label = n)) +
  geom_bar(fill = "#13A89E", stat = "identity") +
  ylim(0, nrow(dat)) +
  xlab("Leadership role\n(b)") + ylab("Number of Responses") +
  scale_x_discrete(labels = function(x) str_wrap(x, width = 10)) +
  geom_text(size = 3, position = position_stack(vjust = 0.5), color = "white") +
  theme(plot.title = element_text(hjust = 0.5))

p2_2 <- count(dat, Leadership) %>%
  ggplot(aes(x = Leadership, y = n, label = n)) +
  geom_bar(fill = "#13A89E", stat = "identity") +
  ylim(0, nrow(dat)) +
  xlab("Leadership role") + ylab("Number of Responses") +
  scale_x_discrete(labels = function(x) str_wrap(x, width = 10)) +
  geom_text(size = 3, position = position_stack(vjust = 0.5), color = "white") +
  theme(plot.title = element_text(hjust = 0.5))

if(choose == "all"){
  # Number of responses text
  cat('This report summarises', nrow(dat), 'survey responses from life and health sciences researchers at Medical Research Council (MRC)-funded institutions, The University of Bristol, and The Babraham Institute. \n\n ')
  # Plots
  grid.arrange(p1, p2, nrow = 1, widths = c(4, 2))
  # Plot caption
  cat('\n\n<em><b>Figure 1: Breakdown of survey responses</b> by organisation and research discipline (a) and by leadership role (b). A major leadership role was defined as running a group/lab, directing a school/organisation, or similar.</em>\n\n')
} else if(choose == "mrc"){
  # Number of responses text
  cat('This report summarises', nrow(dat), 'survey responses from life and health sciences researchers at Medical Research Council (MRC)-funded institutions. \n\n')
  # Plots
  grid.arrange(p1_2, p2, nrow = 1, widths = c(4, 2))
  # Plot caption
  cat('\n\n<em><b>Figure 1: Breakdown of survey responses</b> by research domain taxonomy and discipline (a) and by leadership role (b). A major leadership role was defined as running a group/lab, directing a school/organisation, or similar.</em>\n\n')
} else if(choose == "uob"){
  # Number of responses text
  cat('This report summarises', nrow(dat), 'survey responses from life and health sciences researchers at The University of Bristol.')
  # Plot
  grid.arrange(p1_3, p2, nrow = 1, widths = c(2, 2))
  # Plot caption
  cat('\n\n<em><b>Figure 1: Breakdown of survey responses</b> by research discipline (a) and by leadership role (b). A major leadership role was defined as running a group/lab, directing a school/organisation, or similar.</em>\n\n')
} else if(choose == "babraham"){
  # Number of responses text
  cat('This report summarises', nrow(dat), 'survey responses from life sciences researchers at The Babraham Institute.')
  # Plot
  grid.arrange(p2, nrow = 1, widths = c(2))
  # Plot caption
  cat('\n\n<em><b>Figure 1: Breakdown of survey responses from researchers by leadership role.</b> A major leadership role was defined as running a group/lab, directing a school/organisation, or similar.</em>\n\n')
} else {
  cat('Error: Please choose a valid data breakdown.')
}
```

# Open research training
Survey respondents were asked to describe their familiarity with the five open research areas, whether they thought they would find training useful, and if they thought their institution already provided sufficient training.

```{r training-plot, echo=FALSE}
dat_all_training %>% group_by(OR_Area, Training) %>% count(Response) %>%   
  ggplot(aes(x = Training, y = n, fill = forcats::fct_rev(Response)))+
  geom_bar(stat = "identity", position = "stack") +
  facet_grid(~ OR_Area) +
  scale_fill_manual(name = "Response", values = c("#28295B", "#4E4F86", "#EC008C", "#6e6e6e", "#13A89E")) +
  theme(legend.position="bottom", legend.text = element_text(size = 7)) +
  xlab("Would Find Training Useful") + ylab("Number of Responses") +
  theme(plot.title = element_text(hjust = 0.5)) +
  geom_text(aes(label = n, group = OR_Area, Training), size = 3, position = position_stack(vjust = 0.5, reverse = TRUE), color = "white")
```

<em><b>Figure 2: Breakdown of responses related to training in the five open research areas.</b> Respondents could select from multiple answers, so responses were limited as follows: if a respondent said they would not find training useful, but said their institution provided sufficient training, it was marked as such. If the selected they neither wanted training nor thought their institution provided sufficient training, they were marked based on familiarity. If a respondent said they would find training useful but did not state their familiarity with the open research area, they were marked as having unknown familiarity.</em>

# Priority of training topics
Survey respondents were asked to rank in order of priority the open research areas they think researchers would most benefit from. They could select from the five open research areas and up to three additonal areas of their choice. Only `r length(unique(priority$randomID))` repondents completed this section.

```{r priority-plot, echo=FALSE}
priority %>% group_by(OR_Area) %>% count(Rank) %>%
  ggplot(aes(x = OR_Area, y = n, fill = forcats::fct_rev(Rank))) +
  geom_bar(stat = "identity", position = "stack") +
  scale_fill_manual(name = "Rank", 
                    values = c("#28295B", "#4E4F86", "#13A89E", "#ed68b7", "#EC008C", "#6e6e6e")) +
  theme(legend.position="right") +
  xlab("Open Research Areas") + ylab("Number of Responses") +
  theme(plot.title = element_text(hjust = 0.5)) +
  geom_text(aes(group = OR_Area, label = n), size = 3, position = position_stack(vjust = 0.5, reverse = FALSE), color = "white")
```

<em><b>Figure 3: Priority ranking of each of the five open research areas.</b> 1 is the highest priority and 8 is the lowest. Where an area has been ranked 6-8, the number of responses is aggregated.</em>

A graph showing how the subset of respondents who said they would find open research training useful ranked the priority of research training in that area is shown in figure 4.

```{r priority-training-plot, echo=FALSE}
priority_training %>% group_by(OR_Area) %>% count(Rank) %>%
  ggplot(aes(x = OR_Area, y = n, fill = forcats::fct_rev(Rank))) +
  geom_bar(stat = "identity", position = "stack") +
  scale_fill_manual(name = "Rank", 
                    values = c("#28295B", "#4E4F86", "#13A89E", "#ed68b7", "#EC008C", "#6e6e6e")) +
  theme(legend.position="right") +
  xlab("Open Research Areas") + ylab("Number of Responses") +
  theme(plot.title = element_text(hjust = 0.5)) +
  geom_text(aes(group = OR_Area, label = n), size = 3, position = position_stack(vjust = 0.5, reverse = FALSE), color = "white")
```

<em><b>Figure 4: Priority ranking of each of the five open research areas, subsetted to only show responses from researchers who would find training in each area useful.</b> 1 is the highest priority and 8 is the lowest. Where an area has been ranked 6-8, the number of responses is aggregated.</em>

## Suggested additional open research areas
Responents suggested and ranked in their top five priority training areas the following additional open research areas:

  * **Legal, ethics and governance** -- this training might be relevant for senior researchers and organisation managers, and could address the call for training lead researchers on the value of open research practices.
  * **Experimental design** -- this training could be considered as part of a primer sries or background information related to the research workflow.

# Summary of free text responses
Free text responses given in the survey are summarised below. These responses are from health and life sciences researchers across the University of Bristol, MRC-funded organisations, and the Babraham Institute, and may not reflect the views of researchers at any particular organisation. Responses were grouped into seven key areas:

  * Culture, leadership and institutional requirements
  * Systemic issues, e.g. funding and publishing models
  * Confusion over open research terms
  * Workshop contents
  * Workshop structure and design
  * Workshop audiences
  * Challenges and worthwhileness

## Culture, leadership and institutional requirements
Many responses complained of a lack of institutional or direct managerial leadership, or of a culture where open research was not valued. Respondents requested that their institutions provided: a) guidance on licensing, archiving data, etc.; b) direct financial support for e.g. sharing data.; c) policies endorsing the use of free and open software tools; and d) training on open research practices. Several respondents requested that project leaders be specifically trained in open research methods so that they could appreciate the value and accept the time taken to implement them. Some respondents praised institutional leadership where it supported Open Access publishing. Some respondents showed that institution induction processes overlooked open research practices as a component in the on-boarding process.

## Systemic issues
Many responses complained that open research practices take time to implement, that they have limited time to attend training courses, and that open research practices are not incentivised by funders, publishers, or their institutions. Several responses also said that open research practices can be costly e.g. open access publishing, but they do not want to fund closed-access journals.

## Confusion over open research terms
Some respondents appeared confused by the terms used in the survey - particularly 'open code', which we defined as applying to materials and formalised procedures other than computer software, but which were understandably interpreted differently.

## Workshop contents
In general, respondents would like workshops to cover specific types of research, using specific examples and providing templates that researchers can use to put their learning into practice. Many respondents feel that, of the currently available open research workshops they have access to, information on how to implement open research practices to projects using qualitative data is neglected.

In relation to open access publishing, respondents would like to know about plan-S and identifying appropriate journals and funding routes. 

In open code workshops, respondents would like to learn about accessible tools, e.g. Python over paid-for tools like MATLAB), licensing and how much code to make public. 

For data sharing, respondents would like workshops to cover the different types of repositories available to them, legislation such as GDPR, guidance on data management plans, and to what extent they can practice data sharing if they would with restricted or sensitive data. 

In relation to preprints, respondents wanted information on the impact publishing preprints has on journal publishing, and if DOIs can carry through from preprint to full publication. 

Finally, respondents would like preregistration workshops to cover the tradeoffs between preregistering and prematurely disclosing research ideas and avoiding the discouragement of data exploration.

## Workshop structure and design
There was some support for training that provided specific step-by-step guidance rather than training that raised awareness of a practice. Specific, practical training was requested.

## Workshop audience
Many respondents believed they would get more benefit from training workshops targeted to a specific type of research, e.g. research using qualitative data or restricted data. Several respondents expressed that training might be more relevant to early career researchers and PhD students, who will be doing most of the practical work in a research project, and less relevant to supervisors and PIs. However, several respondents also suggested that they would like to see a top-down approach to implementing open research practices within research groups or organisations, which would require senior researchers to understand and value these practices. 

## Challenges and worthwhileness
Some respondents challenged the worthwhileness of some of our training topics, mostly challenging the usefulness of preregistration to discovery-based science. 

---

[`r fontawesome("github")` &nbsp; GitHub repository](https://github.com/UKRN-Open-Research/survey-reports) &nbsp;&nbsp; | &nbsp;&nbsp; `r academicons("open-data")` &nbsp; Survey data