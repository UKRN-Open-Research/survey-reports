---
title: "Open Research Survey Report"
author: "Emma Wilson"
date: "22/02/2021"
output: 
    html_document:
      theme: cosmo
---

```{r select, include=FALSE}
# Choose the data to run the report on
choose <- c("all", "mrc", "uob", "babraham")[1]
```

```{r logo, echo=FALSE}
htmltools::img(src = knitr::image_uri(file.path("logo.jpg")), 
               alt = 'UKRN logo', 
               style = 'position:absolute; top:0; right:0; padding:25px 250px;')
```

---

```{r setup, include=FALSE}
# R packages
library(tidyverse)    # Tivdyverse packages
# Functions
source("functions/format_distribution.R") # Create a histogram of responses
source("functions/format_leadership.R")   # Format MajorleadershipRole for graph
source("functions/format_priority.R")     # Format OR area priority responses
source("functions/format_training.R")     # Format training responses for graph
source("functions/read_survey.R")         # Read in and format survey data
# KnitR
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)
```

```{r data, include=FALSE}
# Clean column text
col_order <- read_csv("data-helpers/colOrder.csv")
# MRC taxonomy
mrc_group <- read_csv("data-helpers/mrcTaxonomy.csv")
# Survey data
# Read in survey data
dat_mrc <- read_survey("data", "MRC") # MRC-funded institutions
dat_uob <- read_survey("data", "UoB") # University of Bristol
dat_bab <- read_survey("data", "Babraham") # Babraham Institute
#Bind into one dataframe
dat <- rbind(dat_mrc, dat_uob, dat_bab)

#clear environment
rm(col_order, dat_bab, dat_mrc, dat_uob, mrc_group)
```

# Survey Data

```{r, echo=FALSE, results='asis'}
if(choose == "all"){
  cat('This report summarises survey responses from life and health sciences researchers at Medical Research Council (MRC)-funded institutions, The University of Bristol, and The Babraham Institute.')
} else if(choose == "mrc"){
  cat('This report summarises survey responses from life and health sciences researchers at Medical Research Council (MRC)-funded institutions.')
} else if(choose == "uob"){
  cat('This report summarises survey responses from life and health sciences researchers at The University of Bristol.')
} else if(choose == "babraham"){
  cat('This report summarises survey responses from life sciences researchers at The Babraham Institute.')
} else {
  cat('Error: Please choose a valid data breakdown.')
}
```
